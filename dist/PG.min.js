!function(a,b){"use strict";var c=function(){var c,d,e,f=b.location.origin?b.location.origin:b.location.protocol+"//"+b.location.host,g={WON:"won",LOST:"lost",DRAW:"draw"},h=null,i=function(a){return"undefined"!=typeof a?a===d.id?g.WON:a===e.id?g.LOST:g.DRAW:void 0},j=function(){throw new Error("onMatchPrepare is not implemented.")},k=function(){throw new Error("onMatchStart is not implemented.")},l=function(){throw new Error("onMoveValid is not implemented.")},m=function(){throw new Error("onMoveInvalid is not implemented.")},n=function(){throw new Error("onMatchEnd is not implemented.")},o=function(){throw new Error("onServerMessage is not implemented.")},p=function(){throw new Error("onPlayerMessage is not implemented.")},q=function(){throw new Error("onKeyPress is not implemented.")};return{init:function(b){j=b.onMatchPrepare||j,k=b.onMatchStart||k,l=b.onMoveValid||l,m=b.onMoveInvalid||m,n=b.onMatchEnd||n,o=b.onServerMessage||o,p=b.onPlayerMessage||p,q=b.onKeyPress||q,a.addEventListener("message",function(a){if(a.origin!==f)return void console.warn("Origin not recognized: "+a.origin);switch(a.data.type){case"matchPrepare":d=a.data.player,e=a.data.opponent,j(d,e,a.data.moveTimeout,a.data.deviceType);break;case"matchStart":k(a.data.nextPlayerId);break;case"matchMoveValid":l(a.data.playerId,a.data.nextPlayerId,a.data.content,a.data.evaluationContent,i(a.data.winnerPlayerId));break;case"matchMoveInvalid":m(a.data.playerId,a.data.nextPlayerId);break;case"matchEnd":n(i(a.data.winnerPlayerId));break;case"serverMessage":o(a.data.playerId,a.data.content,a.data.result);break;case"playerMessage":p(a.data.content);break;case"keyPress":q(a.data.value)}}),a.parent.postMessage({type:"loaded"},f)},prepared:function(){a.parent.postMessage({type:"prepared"},f)},ready:function(){a.parent.postMessage({type:"ready"},f)},move:function(b,c){return c&&!c(b)?!1:(a.parent.postMessage({type:"move",content:b},f),!0)},showMenu:function(){a.parent.postMessage({type:"showMenu"},f)},serverMessage:function(b,c,d){a.parent.postMessage({type:"serverMessage",publicAnswer:c,requiresConcurrencyControl:d?d:!0,content:b},f)},playerMessage:function(b,d){d&&null!==h||(c={type:"playerMessage",content:b},a.parent.postMessage(c,f),d&&setTimeout(function(){h!==c?(c=h,h=null,a.parent.postMessage(c,f)):h=null},d)),d&&(h=c)}}};a.PG=new c}(window,document);